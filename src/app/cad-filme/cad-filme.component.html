<section class="container">
  <form class="formulario" (ngSubmit)="cadastrarFilme()" [formGroup]="filmeForm">
    <h2 class="formulario__titulo">Cadastro de Filmes</h2>

    <div class="form-field">
      <label class="form-field__label" for="codebar">Código de Barras *</label>
      <input class="form-field__input"
        id="codebar"
        type="number"
        required
        autofocus
        [(ngModel)]="filme.codebar"
        name="codebar"
        pattern="\d{13}"
        formControlName="codebar"
      />
      <app-mensagem
        *ngIf="filmeForm.get('codebar')?.errors?.['required'] && filmeForm.get('codebar')?.touched"
        mensagem="Código de Barras deve ser informado">
      </app-mensagem>
      <app-mensagem
        *ngIf="filmeForm.get('codebar')?.errors && filmeForm.get('codebar')?.touched"
        mensagem="Código de Barras inválido">
      </app-mensagem>
    </div>

    <div class="form-field">
      <label class="form-field__label" for="title">Título *</label>
      <input class="form-field__input"
        id="title"
        type="text"
        required
        pattern="^(\s?[A-ZÀ-Ù][a-zà-ú]*)+(\s[a-zà-ú]*)?(\s[A-ZÀ-Ù][a-zà-ú]*)+"
        [(ngModel)]="filme.title"
        name="title"
        formControlName="title" />
      <app-mensagem
        *ngIf="filmeForm.get('title')?.errors?.['required'] && filmeForm.get('title')?.touched"
        mensagem="Título deve ser informado">
      </app-mensagem>
      <app-mensagem
        *ngIf="filmeForm.get('title')?.errors && filmeForm.get('title')?.touched"
        mensagem="Título inválido">
      </app-mensagem>
    </div>

    <div class="form-field">
      <label class="form-field__label" for="duration">Duração *</label>
      <input class="form-field__input"
        id="duration"
        type="number"
        required
        [(ngModel)]="filme.duration"
        name="duration"
        formControlName="duration" />
      <app-mensagem
        *ngIf="filmeForm.get('duration')?.errors?.['required'] && filmeForm.get('duration')?.touched"
        mensagem="Duração deve ser informada">
      </app-mensagem>
      <app-mensagem
        *ngIf="filmeForm.get('duration')?.errors && filmeForm.get('duration')?.touched"
        mensagem="Duração inválida">
      </app-mensagem>
    </div>

    <div class="form-field">
      <label class="form-field__label" for="rating">Classificação *</label>
      <select class="form-field__input"
        id="rating"
        type="number"
        required
        [(ngModel)]="filme.rating"
        name="rating"
        formControlName="rating" >
        <optgroup>
          <option>0</option>
          <option>10</option>
          <option>12</option>
          <option>14</option>
          <option>16</option>
          <option>18</option>
        </optgroup>
      </select>
      <app-mensagem
        *ngIf="filmeForm.get('rating')?.errors && filmeForm.get('rating')?.touched"
        mensagem="Classificação inválida">
      </app-mensagem>
    </div>

    <!-- desligado
    <div class="form-field">
      <label class="form-field__label" for="gender">Gênero *</label>
      <input class="form-field__input"
        id="gender"
        type="text"
        pattern="^([A-ZÀ-Ù][a-zà-ú]*)+"
        [(ngModel)]="filme.gender"
        name="gender"
        formControlName="gender"
      />
      <app-mensagem
        *ngIf="filmeForm.get('gender')?.errors?.['required'] && filmeForm.get('gender')?.touched"
        mensagem="Gênero deve ser informado">
      </app-mensagem>
      <app-mensagem
        *ngIf="filmeForm.get('gender')?.errors && filmeForm.get('gender')?.touched"
        mensagem="Gênero inválido">
      </app-mensagem>
    </div>
    -->

    <div class="form-field">
      <label class="form-field__label" for="genderId">Gênero ID *</label>
      <select class="form-field__input"
        id="genderId"
        type="number"
        required
        [(ngModel)]="filme.genderId"
        name="genderId"
        formControlName="genderId" >
      <optgroup>
        <option *ngFor="let genero of generos" [value]="genero.id">{{ genero.gender }}</option>
      </optgroup>
    </select>
      <app-mensagem
        *ngIf="filmeForm.get('genderId')?.errors?.['required'] && filmeForm.get('genderId')?.touched"
        mensagem="Gênero ID deve ser informado">
      </app-mensagem>
      <app-mensagem
        *ngIf="filmeForm.get('genderId')?.errors && filmeForm.get('genderId')?.touched"
        mensagem="Gênero ID inválido">
      </app-mensagem>
    </div>

    <div>
      <app-mensagem
        *ngIf="!filmeForm.valid"
        mensagem="Formulário inválido">
      </app-mensagem>
    </div>

    <div class="botao-wrapper">
      <button class="botao" type="submit" [disabled]="!filmeForm.valid">Cadastrar</button>
    </div>

    <!--
    <div class="botao-wrapper">
      <button class="botao" type="submit">Cadastrar</button>
    </div>
    -->



  </form>
</section>
